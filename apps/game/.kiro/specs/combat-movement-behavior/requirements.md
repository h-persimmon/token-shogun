# Requirements Document

## Introduction

この機能は、味方と敵のユニットの戦闘時の移動動作を改善し、より戦略的で直感的なゲームプレイ体験を提供することを目的としています。ユニットが攻撃範囲に到達した際の停止動作と、攻撃を受けた際のスタン効果により、プレイヤーがより戦術的な判断を行えるようになります。

## Requirements

### Requirement 1

**User Story:** プレイヤーとして、ユニットが攻撃範囲に到達したら自動的に移動を停止してほしい。そうすることで、ユニットが無駄に敵に近づきすぎることなく、効率的に攻撃できるようになる。

#### Acceptance Criteria

1. WHEN 味方ユニットが敵ユニットの攻撃範囲の端に到達した THEN システムは味方ユニットの移動を停止する SHALL
2. WHEN 敵ユニットが味方ユニットまたは構造物の攻撃範囲の端に到達した THEN システムは敵ユニットの移動を停止する SHALL
3. WHEN ユニットが攻撃範囲内で停止した THEN システムはそのユニットが攻撃動作を開始できる状態にする SHALL
4. IF ターゲットが攻撃範囲から外れた THEN システムはユニットの移動を再開する SHALL

### Requirement 2

**User Story:** プレイヤーとして、ユニットが攻撃を受けた時に一時的に動きを止めてほしい。そうすることで、攻撃の重みが感じられ、戦闘がより戦略的になる。

#### Acceptance Criteria

1. WHEN ユニットが攻撃を受けた THEN システムはそのユニットを一定時間スタン状態にする SHALL
2. WHEN ユニットがスタン状態になった THEN システムは現在の移動コマンドをキャンセルする SHALL
3. WHEN スタン時間が経過した THEN システムはユニットの通常の動作を復帰させる SHALL
4. WHEN ユニットがスタン状態の間 THEN システムはそのユニットが新しい移動コマンドを受け付けない SHALL

### Requirement 3

**User Story:** 開発者として、スタン時間を設定可能にしたい。そうすることで、ゲームバランスを調整できるようになる。

#### Acceptance Criteria

1. WHEN システムが初期化される THEN スタン時間の設定値を読み込む SHALL
2. IF スタン時間が設定されていない THEN システムはデフォルト値（1秒）を使用する SHALL
3. WHEN ユニットタイプが異なる THEN システムは各ユニットタイプに応じたスタン時間を適用する SHALL
