# Requirements Document

## Introduction

大きいサイズのマップを読み込んだ際に、プレイヤーが画面をドラッグ（grab）することでカメラを移動できる機能を実装します。マップのサイズは外部から設定可能で、カメラの移動範囲はマップの境界内に制限されます。拡大縮小機能は含まれません。

## Requirements

### Requirement 1

**User Story:** プレイヤーとして、大きなマップを探索するために、マウスドラッグでカメラを移動したい

#### Acceptance Criteria

1. WHEN プレイヤーがマウスボタンを押下してドラッグ操作を開始 THEN システムはカメラの移動モードに入る
2. WHEN プレイヤーがマウスを移動している間 THEN カメラはマウスの移動方向と逆方向に移動する
3. WHEN プレイヤーがマウスボタンを離す THEN カメラの移動モードが終了する
4. WHEN ドラッグ操作中にマウスカーソルがゲーム画面外に出る THEN カメラの移動は継続される

### Requirement 2

**User Story:** 開発者として、マップのサイズを動的に設定できるインターフェースが欲しい

#### Acceptance Criteria

1. WHEN マップサイズが設定される THEN システムはマップの幅と高さの情報を受け取る
2. WHEN マップサイズが変更される THEN カメラの移動制限も自動的に更新される
3. IF マップサイズが画面サイズより小さい THEN カメラの移動は無効化される

### Requirement 3

**User Story:** プレイヤーとして、マップの境界外にカメラが移動しないように制限されたい

#### Acceptance Criteria

1. WHEN カメラが左端の境界に達する THEN それ以上左に移動できない
2. WHEN カメラが右端の境界に達する THEN それ以上右に移動できない
3. WHEN カメラが上端の境界に達する THEN それ以上上に移動できない
4. WHEN カメラが下端の境界に達する THEN それ以上下に移動できない
5. WHEN カメラが境界に達した状態でドラッグ操作を継続 THEN 境界内での移動は可能である

### Requirement 4

**User Story:** プレイヤーとして、カメラ操作中に視覚的なフィードバックが欲しい

#### Acceptance Criteria

1. WHEN ドラッグ操作を開始 THEN マウスカーソルがgrab状態（掴んでいる状態）に変化する
2. WHEN ドラッグ操作中 THEN マウスカーソルがgrabbing状態（掴んで移動中の状態）に変化する
3. WHEN ドラッグ操作を終了 THEN マウスカーソルが通常状態に戻る

### Requirement 5

**User Story:** 開発者として、既存のゲームシステムと統合可能なカメラ制御システムが欲しい

#### Acceptance Criteria

1. WHEN カメラ制御システムが初期化される THEN 既存のPhaserシーンと統合される
2. WHEN 他のゲームシステムがカメラ位置を参照 THEN 現在のカメラ位置情報を取得できる
3. IF 他のシステムがカメラ位置を変更 THEN カメラ制御システムは新しい位置を反映する
4. WHEN ゲームが一時停止状態 THEN カメラの移動操作は無効化される