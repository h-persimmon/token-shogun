# 実装計画

- [x] 1. AttackComponentに攻撃タイプ機能を追加
  - AttackComponentに攻撃タイプ（direct/artillery/homing）、弾丸速度、爆発範囲、飛行時間のプロパティを追加
  - createAttackComponent関数を拡張して新しいパラメータに対応
  - 攻撃タイプ判定のユーティリティ関数を実装
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 2. ProjectileComponentを新規作成
  - 弾丸の状態管理用のProjectileComponentを実装
  - t-wadaのやり方で実装
  - 砲台攻撃用（着弾位置、爆発範囲、飛行時間）と弓矢攻撃用（追跡対象ID）のプロパティを含む
  - ProjectileComponentの作成、判定、ユーティリティ関数を実装
  - _要件: 1.1, 2.2, 4.4_

- [x] 3. AttackSystemに弾丸作成機能を追加
  - executeAttack関数を拡張して攻撃タイプに応じた弾丸を作成
  - t-wadaのやり方で実装
  - 砲台攻撃の着弾位置予測計算を実装
  - 弓矢攻撃の対象追跡設定を実装
  - _要件: 1.1, 1.2, 2.1, 2.2_

- [x] 4. AttackSystemに弾丸更新処理を実装
  - update関数に弾丸の位置更新処理を追加
  - t-wadaのやり方で実装
  - 砲台弾丸の飛行時間管理と着弾判定を実装
  - 弾矢弾丸の対象追跡と到達判定を実装
  - _要件: 4.1, 4.2, 4.3_

- [x] 5. 砲台攻撃の範囲ダメージ処理を実装
  - 着弾時の範囲内敵検索機能を実装
  - 距離に応じたダメージ減衰計算を実装
  - 範囲内の複数敵への同時ダメージ適用を実装
  - _要件: 1.3, 1.4_

- [x] 6. 弓矢攻撃の必中処理を実装
  - 対象エンティティの追跡ロジックを実装
  - 弾丸が対象に到達した際の必中ダメージ適用を実装
  - 対象が消失した場合の弾丸消失処理を実装
  - _要件: 2.3, 2.4_

- [x] 7. 弾丸のObjectPool管理を実装
  - ProjectileComponentのオブジェクトプール機能を実装
  - 弾丸作成時のプールからの取得処理を実装
  - 弾丸消失時のプールへの返却処理を実装
  - _要件: 4.4_

- [x] 8. 攻撃エフェクトシステムを拡張
  - 砲台攻撃の弾丸軌道表示を実装
  - 砲台攻撃の爆発エフェクトを実装
  - 弓矢攻撃の追跡軌道表示を実装
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [ ] 9. AttackComponent拡張のユニットテストを作成
  - 新しい攻撃タイプパラメータの設定と取得テスト
  - createAttackComponent関数の拡張パラメータテスト
  - 攻撃タイプ判定関数のテスト
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [ ] 10. ProjectileComponentのユニットテストを作成
  - ProjectileComponentの作成と初期化テスト
  - 砲台攻撃用プロパティの設定テスト
  - 弓矢攻撃用プロパティの設定テスト
  - _要件: 1.1, 2.1, 2.2_

- [ ] 11. AttackSystem拡張のユニットテストを作成
  - 弾丸作成ロジックのテスト
  - 砲台攻撃の予測計算テスト
  - 弓矢攻撃の追跡ロジックテスト
  - 範囲ダメージ計算のテスト
  - _要件: 1.1, 1.2, 1.3, 2.1, 2.2, 2.3_

- [ ] 12. 統合テストを作成
  - 砲台攻撃の完全フロー（発動→飛行→着弾→範囲ダメージ）テスト
  - 弓矢攻撃の完全フロー（発動→追跡→命中→ダメージ）テスト
  - 複数弾丸の同時処理テスト
  - _要件: 1.1, 1.2, 1.3, 1.4, 2.1, 2.2, 2.3, 2.4_