# Requirements Document

## Introduction

ユニット（味方ユニット、味方ストラクチャー、敵）をクリックした際に、そのユニットの詳細情報をポップアップ形式で表示する機能を実装します。この機能により、プレイヤーはゲーム中にユニットの状態や能力を素早く確認できるようになります。

## Requirements

### Requirement 1

**User Story:** プレイヤーとして、ユニットをクリックしてその詳細情報を確認したい。そうすることで、戦略的な判断を行うための情報を得ることができる。

#### Acceptance Criteria

1. WHEN プレイヤーがユニット（味方ユニット、味方ストラクチャー、敵）をクリック THEN システム SHALL そのユニットの情報をポップアップ形式で表示する
2. WHEN ユニット情報ポップアップが表示されている状態で別の箇所をクリック THEN システム SHALL ポップアップを非表示にする
3. WHEN ユニット情報ポップアップが表示されている状態で別のユニットをクリック THEN システム SHALL 前のポップアップを閉じて新しいユニットの情報を表示する

### Requirement 2

**User Story:** プレイヤーとして、ユニット情報ポップアップに基本的な識別情報を表示したい。そうすることで、どのユニットの情報を見ているかを明確に把握できる。

#### Acceptance Criteria

1. WHEN ユニット情報ポップアップが表示される THEN システム SHALL ユニットIDを表示する
2. WHEN 敵ユニットの情報ポップアップが表示される THEN システム SHALL 敵の種別（タイプ）を表示する
3. WHEN ユニット情報ポップアップが表示される THEN システム SHALL ユニットの現在の体力情報を表示する

### Requirement 3

**User Story:** プレイヤーとして、攻撃可能なユニットの射程を視覚的に確認したい。そうすることで、戦術的な配置や攻撃範囲を理解できる。

#### Acceptance Criteria

1. WHEN 攻撃能力を持つユニットの情報ポップアップが表示される THEN システム SHALL そのユニットの射程を色付きの円で表示する
2. WHEN 攻撃能力を持たないユニットの情報ポップアップが表示される THEN システム SHALL 射程表示を行わない
3. WHEN ユニット情報ポップアップが閉じられる THEN システム SHALL 射程表示の円も非表示にする

### Requirement 4

**User Story:** プレイヤーとして、ポップアップが適切な位置に表示されることを期待する。そうすることで、ゲームプレイの妨げにならずに情報を確認できる。

#### Acceptance Criteria

1. WHEN ユニット情報ポップアップが表示される THEN システム SHALL クリックしたユニットの近くの適切な位置にポップアップを配置する
2. WHEN ポップアップが画面端に近い位置に表示される場合 THEN システム SHALL ポップアップが画面外にはみ出さないよう位置を調整する
3. WHEN ポップアップが表示される THEN システム SHALL 他のUI要素と重ならないよう適切なz-indexを設定する

### Requirement 5

**User Story:** プレイヤーとして、ポップアップの表示・非表示がスムーズに行われることを期待する。そうすることで、快適なユーザー体験を得ることができる。

#### Acceptance Criteria

1. WHEN ユニット情報ポップアップが表示される THEN システム SHALL 適切なアニメーション効果で表示する
2. WHEN ユニット情報ポップアップが非表示になる THEN システム SHALL 適切なアニメーション効果で非表示にする
3. WHEN 複数のユニットを連続してクリックする THEN システム SHALL 前のポップアップから新しいポップアップへスムーズに切り替える